{%- let mode_class -%}
{%- let subtitle -%}
{%- block variables -%}
    {%- let mode_class = "" -%}
    {%- let subtitle = "".to_owned() -%}
{%- endblock -%}
<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>{{ context.config.site.title }}{% if !subtitle.is_empty() %} :: {{ subtitle }}{% endif %}</title>
        <meta charset="UTF-8" />
        <meta name="author" content="{{ context.config.author.name }}" />
        <meta name="description" content="{{ context.config.site.description }}" />
        <meta name="robots" content="index,follow" />
        <meta name="generator" content="{{ context.config.site.generator }}" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0" />
        <link rel="stylesheet" href="/static/main.css" media="(min-width:481px)" />
        <link rel="stylesheet" href="/static/sp.css" media="only screen and (max-width:480px)" />
        <link rel="icon" href="/static/favicon.png" />
        <link rel="icon" href="/static/favicon.svg" />
        <link rel="mask-icon" href="/static/mask-icon.svg" color="#333333" />
        <link rel="apple-touch-icon" href="/static/apple-touch-icon.png" />
        <script type="text/javascript">window.MathJax = {{- context.config.mathjax.options|safe -}};</script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <header>
            <h1><a href="/">{{ context.config.site.title }}</a></h1>
            {% if !subtitle.is_empty() %}<h2>{{ subtitle }}</h2>{% endif %}
            <nav id="global-nav">
                <h2>Menu</h2>
                <ul>
                    {% block top_nav %}
                        <li><a href="/" title="日記" accesskey="1">diary</a></li>
                        <li><a href="/" title="検索" accesskey="2">search</a></li>
                        <li><a href="/about" title="このサイトについて" accesskey="3">about</a></li>
                        <li><a href="/atom" title="Atomフィード" accesskey="4">atom</a></li>
                        {% if context.is_authorized -%}
                            <li><a href="/admin/" title="管理ページ" accesskey="5">admin</a></li>
                        {%- endif %}
                    {% endblock %}
                </ul>
            </nav>
        </header>
        <main class="{{ mode_class }}">
            {% block content %}{% endblock %}
        </main>
        <nav id="pager-nav">
            <ul>
                <li>{% block prev_page %}{% endblock %}</li>
                <li>{% block next_page %}{% endblock %}</li>
            </ul>
        </nav>
        <nav id="side-nav" class="{{ mode_class }}"></nav>
        <footer>
            <address>Presented by {{ context.config.author.name }} under <a rel="external" href="http://www.kmonos.net/nysl/nysdl.ja.html">NYSDL</a>.</address>
        </footer>
        <script type="module" src="/static/index.js"></script>
    </body>
</html>
